<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · Aqua.jl</title><meta name="title" content="Home · Aqua.jl"/><meta property="og:title" content="Home · Aqua.jl"/><meta property="twitter:title" content="Home · Aqua.jl"/><meta name="description" content="Documentation for Aqua.jl."/><meta property="og:description" content="Documentation for Aqua.jl."/><meta property="twitter:description" content="Documentation for Aqua.jl."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href><img src="assets/logo.svg" alt="Aqua.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href>Aqua.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#*A*uto-*QU*ality-*A*ssurance-for-Julia-packages"><span><em>A</em>uto <em>QU</em>ality <em>A</em>ssurance for Julia packages</span></a></li><li><a class="tocitem" href="#Quick-usage"><span>Quick usage</span></a></li><li><a class="tocitem" href="#How-to-add-Aqua.jl..."><span>How to add Aqua.jl...</span></a></li><li><a class="tocitem" href="#test_functions"><span>Test functions</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaTesting/Aqua.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaTesting/Aqua.jl/blob/master/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Aqua.jl:"><a class="docs-heading-anchor" href="#Aqua.jl:">Aqua.jl:</a><a id="Aqua.jl:-1"></a><a class="docs-heading-anchor-permalink" href="#Aqua.jl:" title="Permalink"></a></h1><h2 id="*A*uto-*QU*ality-*A*ssurance-for-Julia-packages"><a class="docs-heading-anchor" href="#*A*uto-*QU*ality-*A*ssurance-for-Julia-packages"><em>A</em>uto <em>QU</em>ality <em>A</em>ssurance for Julia packages</a><a id="*A*uto-*QU*ality-*A*ssurance-for-Julia-packages-1"></a><a class="docs-heading-anchor-permalink" href="#*A*uto-*QU*ality-*A*ssurance-for-Julia-packages" title="Permalink"></a></h2><p>Aqua.jl provides functions to run a few automatable checks for Julia packages:</p><ul><li>There are no method ambiguities.</li><li>There are no undefined <code>export</code>s.</li><li>There are no unbound type parameters.</li><li>There are no stale dependencies listed in <code>Project.toml</code>.</li><li>Check that test target of the root project <code>Project.toml</code> and test project (<code>test/Project.toml</code>) are consistent.</li><li>Check that all external packages listed in <code>deps</code> have corresponding <code>compat</code> entries.</li><li>There are no &quot;obvious&quot; type piracies.</li><li>The package does not create any persistent Tasks that might block precompilation of dependencies.</li></ul><h2 id="Quick-usage"><a class="docs-heading-anchor" href="#Quick-usage">Quick usage</a><a id="Quick-usage-1"></a><a class="docs-heading-anchor-permalink" href="#Quick-usage" title="Permalink"></a></h2><p>Call <code>Aqua.test_all(YourPackage)</code> from the REPL, e.g.,</p><pre><code class="language-julia hljs">using YourPackage
using Aqua
Aqua.test_all(YourPackage)</code></pre><h2 id="How-to-add-Aqua.jl..."><a class="docs-heading-anchor" href="#How-to-add-Aqua.jl...">How to add Aqua.jl...</a><a id="How-to-add-Aqua.jl...-1"></a><a class="docs-heading-anchor-permalink" href="#How-to-add-Aqua.jl..." title="Permalink"></a></h2><h3 id="...as-a-test-dependency?"><a class="docs-heading-anchor" href="#...as-a-test-dependency?">...as a test dependency?</a><a id="...as-a-test-dependency?-1"></a><a class="docs-heading-anchor-permalink" href="#...as-a-test-dependency?" title="Permalink"></a></h3><p>There are two ways to add Aqua.jl as a test dependency to your package. To avoid breaking tests when a new Aqua.jl version is released, it is recommended to add a version bound for Aqua.jl.</p><ol><li><p>In <code>YourPackage/test/Project.toml</code>, add Aqua.jl to <code>[dep]</code> and <code>[compat]</code> sections, like</p><pre><code class="language-toml hljs">[deps]
Aqua = &quot;4c88cf16-eb10-579e-8560-4a9242c79595&quot;
Test = &quot;8dfed614-e22c-5e08-85e1-65c5234f0b40&quot;

[compat]
Aqua = &quot;0.8&quot;</code></pre></li><li><p>In <code>YourPackage/Project.toml</code>, add Aqua.jl to <code>[compat]</code> and <code>[extras]</code> section and the <code>test</code> target, like</p><pre><code class="language-toml hljs">[compat]
Aqua = &quot;0.8&quot;

[extras]
Aqua = &quot;4c88cf16-eb10-579e-8560-4a9242c79595&quot;
Test = &quot;8dfed614-e22c-5e08-85e1-65c5234f0b40&quot;

[targets]
test = [&quot;Aqua&quot;, &quot;Test&quot;]</code></pre></li></ol><p>If your package supports Julia pre-1.2, you need to use the second approach, although you can use both approaches at the same time.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>In normal use, <code>Aqua.jl</code> should not be added to <code>[deps]</code> in <code>YourPackage/Project.toml</code>!</p></div></div><h3 id="...to-your-tests?"><a class="docs-heading-anchor" href="#...to-your-tests?">...to your tests?</a><a id="...to-your-tests?-1"></a><a class="docs-heading-anchor-permalink" href="#...to-your-tests?" title="Permalink"></a></h3><p>It is recommended to create a separate file <code>YourPackage/test/Aqua.jl</code> that gets included in <code>YourPackage/test/runtests.jl</code> with either</p><pre><code class="language-julia hljs">using Aqua
Aqua.test_all(YourPackage)</code></pre><p>or some fine-grained checks with options, e.g.,</p><pre><code class="language-julia hljs">using Aqua

@testset &quot;Aqua.jl&quot; begin
  Aqua.test_all(
    YourPackage;
    ambiguities=(exclude=[SomePackage.some_function], broken=true),
    stale_deps=(ignore=[:SomePackage],),
    deps_compat=(ignore=[:SomeOtherPackage],),
    piracies=false,
  )
end</code></pre><p>Note, that for all tests with no explicit options provided, the default options are used.</p><p>For more details on the options, see the respective functions <a href="#test_functions">below</a>.</p><h3 id="Example-uses"><a class="docs-heading-anchor" href="#Example-uses">Example uses</a><a id="Example-uses-1"></a><a class="docs-heading-anchor-permalink" href="#Example-uses" title="Permalink"></a></h3><p>The following is a small selection of packages that use Aqua.jl:</p><ul><li><a href="https://github.com/oscar-system/GAP.jl">GAP.jl</a></li><li><a href="https://github.com/thofma/Hecke.jl">Hecke.jl</a></li><li><a href="https://github.com/oscar-system/Oscar.jl">Oscar.jl</a></li></ul><h2 id="test_functions"><a class="docs-heading-anchor" href="#test_functions">Test functions</a><a id="test_functions-1"></a><a class="docs-heading-anchor-permalink" href="#test_functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Aqua.test_all" href="#Aqua.test_all"><code>Aqua.test_all</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">test_all(testtarget::Module)</code></pre><p>Run following tests in isolated testset:</p><ul><li><a href="#Aqua.test_ambiguities-Tuple{Any}"><code>test_ambiguities([testtarget, Base, Core])</code></a></li><li><a href="#Aqua.test_unbound_args-Tuple{Module}"><code>test_unbound_args(testtarget)</code></a></li><li><a href="#Aqua.test_undefined_exports-Tuple{Module}"><code>test_undefined_exports(testtarget)</code></a></li><li><a href="#Aqua.test_project_extras-Tuple{Any}"><code>test_project_extras(testtarget)</code></a></li><li><a href="#Aqua.test_stale_deps-Tuple{Any}"><code>test_stale_deps(testtarget)</code></a></li><li><a href="#Aqua.test_deps_compat-Tuple{Base.PkgId}"><code>test_deps_compat(testtarget)</code></a></li><li><a href="#Aqua.test_piracies-Tuple{Module}"><code>test_piracies(testtarget)</code></a></li><li><a href="#Aqua.test_persistent_tasks-Tuple{Base.PkgId}"><code>test_persistent_tasks(testtarget)</code></a></li></ul><p>The keyword argument <code>$x</code> (e.g., <code>ambiguities</code>) can be used to control whether or not to run <code>test_$x</code> (e.g., <code>test_ambiguities</code>). If <code>test_$x</code> supports keyword arguments, a <code>NamedTuple</code> can also be passed to <code>$x</code> to specify the keyword arguments for <code>test_$x</code>.</p><p><strong>Keyword Arguments</strong></p><ul><li><code>ambiguities = true</code></li><li><code>unbound_args = true</code></li><li><code>undefined_exports = true</code></li><li><code>project_extras = true</code></li><li><code>stale_deps = true</code></li><li><code>deps_compat = true</code></li><li><code>piracies = true</code></li><li><code>persistent_tasks = true</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTesting/Aqua.jl/blob/e55210e45ee122c8047a2ceeca78d6822df2531e/src/Aqua.jl#L24-L52">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Aqua.find_persistent_tasks_deps-Tuple{Base.PkgId}" href="#Aqua.find_persistent_tasks_deps-Tuple{Base.PkgId}"><code>Aqua.find_persistent_tasks_deps</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Aqua.find_persistent_tasks_deps(package; broken = Dict{String,Bool}(), kwargs...)</code></pre><p>Test all the dependencies of <code>package</code> with <a href="#Aqua.test_persistent_tasks-Tuple{Base.PkgId}"><code>Aqua.test_persistent_tasks</code></a>. On Julia 1.10 and higher, it returns a list of all dependencies failing the test. These are likely the ones blocking precompilation of your package.</p><p>Any additional kwargs (e.g., <code>tmax</code>) are passed to <a href="#Aqua.test_persistent_tasks-Tuple{Base.PkgId}"><code>Aqua.test_persistent_tasks</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTesting/Aqua.jl/blob/e55210e45ee122c8047a2ceeca78d6822df2531e/src/persistent_tasks.jl#L95-L103">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Aqua.test_ambiguities-Tuple{Any}" href="#Aqua.test_ambiguities-Tuple{Any}"><code>Aqua.test_ambiguities</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">test_ambiguities(package::Union{Module, PkgId})
test_ambiguities(packages::Vector{Union{Module, PkgId}})</code></pre><p>Test that there is no method ambiguities in given package(s).  It calls <code>Test.detect_ambiguities</code> in a separated clean process to avoid false-positive.</p><p><strong>Keyword Arguments</strong></p><ul><li><code>broken::Bool = false</code>: If true, it uses <code>@test_broken</code> instead of <code>@test</code>.</li><li><code>color::Union{Bool, Nothing} = nothing</code>: Enable/disable colorful output if a <code>Bool</code>.  <code>nothing</code> (default) means to inherit the setting in the current process.</li><li><code>exclude::AbstractVector = []</code>: A vector of functions or types to be excluded from ambiguity testing.  A function means to exclude <em>all</em> its methods.  A type means to exclude <em>all</em> its methods of the callable (sometimes also called &quot;functor&quot;) and the constructor.   That is to say, <code>MyModule.MyType</code> means to ignore ambiguities between  <code>(::MyType)(x, y::Int)</code> and <code>(::MyType)(x::Int, y)</code>.</li><li><code>recursive::Bool = true</code>: Passed to <code>Test.detect_ambiguities</code>. Note that the default here (<code>true</code>) is different from <code>detect_ambiguities</code>.  This is for testing ambiguities in methods defined in all sub-modules.</li><li>Other keyword arguments such as <code>imported</code> and <code>ambiguous_bottom</code> are passed to <code>Test.detect_ambiguities</code> as-is.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTesting/Aqua.jl/blob/e55210e45ee122c8047a2ceeca78d6822df2531e/src/ambiguities.jl#L1-L27">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Aqua.test_deps_compat-Tuple{Base.PkgId}" href="#Aqua.test_deps_compat-Tuple{Base.PkgId}"><code>Aqua.test_deps_compat</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Aqua.test_deps_compat(package)</code></pre><p>Test that the <code>Project.toml</code> of <code>package</code> has a <code>compat</code> entry for each package listed under <code>deps</code> and for <code>julia</code>.</p><p><strong>Arguments</strong></p><ul><li><code>packages</code>: a top-level <code>Module</code>, a <code>Base.PkgId</code>, or a collection of them.</li></ul><p><strong>Keyword Arguments</strong></p><p><strong>Test choosers</strong></p><ul><li><code>check_julia = true</code>: If true, additionally check for a compat entry for &quot;julia&quot;.</li><li><code>check_extras = true</code>: If true, additionally check &quot;extras&quot;. A NamedTuple can be used to pass keyword arguments with test options (see below).</li><li><code>check_weakdeps = true</code>: If true, additionally check &quot;weakdeps&quot;. A NamedTuple can be used to pass keyword arguments with test options (see below).</li></ul><p><strong>Test options</strong></p><p>If these keyword arguments are set directly, they only apply to the standard test for &quot;deps&quot;. To apply them to &quot;extras&quot; and &quot;weakdeps&quot;, pass them as a NamedTuple to the corresponding <code>check_$x</code> keyword argument.</p><ul><li><code>broken::Bool = false</code>: If true, it uses <code>@test_broken</code> instead of <code>@test</code> for &quot;deps&quot;.</li><li><code>ignore::Vector{Symbol}</code>: names of dependent packages to be ignored.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTesting/Aqua.jl/blob/e55210e45ee122c8047a2ceeca78d6822df2531e/src/deps_compat.jl#L1-L26">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Aqua.test_persistent_tasks-Tuple{Base.PkgId}" href="#Aqua.test_persistent_tasks-Tuple{Base.PkgId}"><code>Aqua.test_persistent_tasks</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Aqua.test_persistent_tasks(package)</code></pre><p>Test whether loading <code>package</code> creates persistent <code>Task</code>s which may block precompilation of dependent packages. See also <a href="#Aqua.find_persistent_tasks_deps-Tuple{Base.PkgId}"><code>Aqua.find_persistent_tasks_deps</code></a>.</p><p><strong>Motivation</strong></p><p>Julia 1.10 and higher wait for all running <code>Task</code>s to finish before writing out the precompiled (cached) version of the package. One consequence is that a package that launches <code>Task</code>s in its <code>__init__</code> function may precompile successfully, but block precompilation of any packages that depend on it.</p><p><strong>Example</strong></p><p>Let&#39;s create a dummy package, <code>PkgA</code>, that launches a persistent <code>Task</code>:</p><pre><code class="language-julia hljs">module PkgA
const t = Ref{Any}()   # to prevent the Timer from being garbage-collected
__init__() = t[] = Timer(0.1; interval=1)   # create a persistent `Timer` `Task`
end</code></pre><p><code>PkgA</code> will precompile successfully, because <code>PkgA.__init__()</code> does not run when <code>PkgA</code> is precompiled. However,</p><pre><code class="language-julia hljs">module PkgB
using PkgA
end</code></pre><p>fails to precompile: <code>using PkgA</code> runs <code>PkgA.__init__()</code>, which leaves the <code>Timer</code> <code>Task</code> running, and that causes precompilation of <code>PkgB</code> to hang.</p><p><strong>How the test works</strong></p><p>This test works by launching a Julia process that tries to precompile a dummy package similar to <code>PkgB</code> above, modified to signal back to Aqua when <code>PkgA</code> has finished loading. The test fails if the gap between loading <code>PkgA</code> and finishing precompilation exceeds time <code>tmax</code>.</p><p><strong>How to fix failing packages</strong></p><p>Often, the easiest fix is to modify the <code>__init__</code> function to check whether the Julia process is precompiling some other package; if so, don&#39;t launch the persistent <code>Task</code>s.</p><pre><code class="nohighlight hljs">function __init__()
    # Other setup code here
    if ccall(:jl_generating_output, Cint, ()) == 0   # if we&#39;re not precompiling...
        # launch persistent tasks here
    end
end</code></pre><p>In more complex cases, you may need to set up independently-callable functions to launch the tasks and set conditions that allow them to cleanly exit.</p><p>On Julia version 1.9 and before, this test always succeeds.</p><p><strong>Arguments</strong></p><ul><li><code>package</code>: a top-level <code>Module</code> or <code>Base.PkgId</code>.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>broken::Bool = false</code>: If true, it uses <code>@test_broken</code> instead of <code>@test</code>.</li><li><code>tmax::Real = 5</code>: the maximum time (in seconds) to wait after loading the package before forcibly shutting down the precompilation process (triggering a test failure).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTesting/Aqua.jl/blob/e55210e45ee122c8047a2ceeca78d6822df2531e/src/persistent_tasks.jl#L1-L76">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Aqua.test_piracies-Tuple{Module}" href="#Aqua.test_piracies-Tuple{Module}"><code>Aqua.test_piracies</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">test_piracies(m::Module)</code></pre><p>Test that <code>m</code> does not commit type piracies. See <a href="https://docs.julialang.org/en/v1/manual/style-guide/#Avoid-type-piracy">Julia documentation</a> for more information about type piracy.</p><p><strong>Keyword Arguments</strong></p><ul><li><code>broken::Bool = false</code>: If true, it uses <code>@test_broken</code> instead of <code>@test</code>.</li><li><code>skip_deprecated::Bool = true</code>: If true, it does not check deprecated methods.</li><li><code>treat_as_own = Union{Function, Type}[]</code>: The types in this container  are considered to be &quot;owned&quot; by the module <code>m</code>. This is useful for  testing packages that deliberately commit some type piracies, e.g. modules adding higher-level functionality to a lightweight C-wrapper, or packages that are extending <code>StatsAPI.jl</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTesting/Aqua.jl/blob/e55210e45ee122c8047a2ceeca78d6822df2531e/src/piracies.jl#L202-L217">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Aqua.test_project_extras-Tuple{Any}" href="#Aqua.test_project_extras-Tuple{Any}"><code>Aqua.test_project_extras</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">test_project_extras(package::Union{Module, PkgId})
test_project_extras(packages::Vector{Union{Module, PkgId}})</code></pre><p>Check that test target of the root project and test project (<code>test/Project.toml</code>) are consistent.  This is useful for supporting Julia &lt; 1.2 while recording test-only dependency compatibility in <code>test/Project.toml</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTesting/Aqua.jl/blob/e55210e45ee122c8047a2ceeca78d6822df2531e/src/project_extras.jl#L1-L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Aqua.test_stale_deps-Tuple{Any}" href="#Aqua.test_stale_deps-Tuple{Any}"><code>Aqua.test_stale_deps</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Aqua.test_stale_deps(package; [ignore])</code></pre><p>Test that <code>package</code> loads all dependencies listed in <code>Project.toml</code>. Note that this does not imply that <code>package</code> loads the dependencies directly, this can be achieved via transitivity as well.</p><div class="admonition is-info"><header class="admonition-header">Weak dependencies and extensions</header><div class="admonition-body"><p>Due to the automatic loading of package extensions once all of their trigger dependencies are loaded, Aqua.jl can, by design of julia, not check if a package extension indeed loads all of its trigger dependencies using <code>import</code> or <code>using</code>. </p></div></div><div class="admonition is-warning"><header class="admonition-header">Known bug</header><div class="admonition-body"><p>Currently, <code>Aqua.test_stale_deps</code> does not detect stale dependencies when they are stdlib.  This is considered a bug and may be fixed in the future.  Such a release is considered non-breaking.</p></div></div><p><strong>Arguments</strong></p><ul><li><code>packages</code>: a top-level <code>Module</code>, a <code>Base.PkgId</code>, or a collection of them.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>ignore::Vector{Symbol}</code>: names of dependent packages to be ignored.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTesting/Aqua.jl/blob/e55210e45ee122c8047a2ceeca78d6822df2531e/src/stale_deps.jl#L1-L28">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Aqua.test_unbound_args-Tuple{Module}" href="#Aqua.test_unbound_args-Tuple{Module}"><code>Aqua.test_unbound_args</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">test_unbound_args(module::Module)</code></pre><p>Test that all methods in <code>module</code> and its submodules do not have unbound type parameters. An unbound type parameter is a type parameter with a <code>where</code>, that does not occur in the signature of some dispatch of the method.</p><p><strong>Keyword Arguments</strong></p><ul><li><code>broken::Bool = false</code>: If true, it uses <code>@test_broken</code> instead of <code>@test</code>.</li></ul><p>For example, the following methods each have <code>T</code> as an unbound type parameter:</p><pre><code class="language-julia hljs">f(x::Int) where {T} = do_something(x)

g(x::S) where {S &lt; : Number, T &lt;: Number} = do_something(x)

h(x::T...) where {T} = do_something(x)</code></pre><p>In the cases of <code>f</code> and <code>g</code> above, the unbound type parameter <code>T</code> is neither present in the signature of the methods nor as a bound of another type parameter. Here, the type parameter <code>T</code> can be removed without changing any semantics.</p><p>For signatures with <code>Vararg</code> (cf. <code>h</code> above), the type parameter unbound for the  zero-argument case (e.g. <code>h()</code>). A possible fix would be to replace <code>h</code> by two methods</p><pre><code class="language-julia hljs">h() = do_something(T[])
h(x1::T, x2::T...) = do_something(T[x1, x2...])</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTesting/Aqua.jl/blob/e55210e45ee122c8047a2ceeca78d6822df2531e/src/unbound_args.jl#L1-L34">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Aqua.test_undefined_exports-Tuple{Module}" href="#Aqua.test_undefined_exports-Tuple{Module}"><code>Aqua.test_undefined_exports</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">test_undefined_exports(module::Module)</code></pre><p>Test that all <code>export</code>ed names in <code>module</code> actually exist.</p><p><strong>Keyword Arguments</strong></p><ul><li><code>broken::Bool = false</code>: If true, it uses <code>@test_broken</code> instead of <code>@test</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaTesting/Aqua.jl/blob/e55210e45ee122c8047a2ceeca78d6822df2531e/src/exports.jl#L28-L36">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.1.2 on <span class="colophon-date" title="Friday 17 November 2023 08:56">Friday 17 November 2023</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
